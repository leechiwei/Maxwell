<!doctype html><meta charset='utf-8'>
<meta name='viewport' content='width=device-width, initial-scale=1'>
<title>0050 1m 即時追蹤</title>
<style>
body{font-family:system-ui,-apple-system,Segoe UI,Roboto,sans-serif;max-width:920px;margin:20px auto;padding:0 14px;line-height:1.6}
small{color:#666}
canvas{width:100%;height:220px;border:1px solid #eee;border-radius:8px}
</style>
<h1>0050 1 分鐘即時追蹤</h1>
<p><small>資料來源：Yahoo Finance（1m, 近 7 天）</small></p>
<canvas id='chart' width='900' height='240'></canvas>
<p id='summary'></p>

<script>
async function load(){
  const res = await fetch('./data.json?ts=' + Date.now());
  if(!res.ok){ document.getElementById('summary').textContent='尚無資料'; return; }
  const payload = await res.json();
  const data = payload.data || [];
  if(!data.length){ document.getElementById('summary').textContent='資料空'; return; }
  const prices = data.map(d=>d.c);
  draw(prices);
  const last = prices[prices.length-1];
  const first = prices[0];
  const chg = (last-first);
  const pct = (chg/first*100);
  document.getElementById('summary').textContent = `更新時間(UTC): ${payload.updated_at}｜最新 ${last.toFixed(2)}｜變動 ${chg.toFixed(2)} (${pct.toFixed(2)}%)`;
}
function draw(series){
  const c = document.getElementById('chart');
  const ctx = c.getContext('2d');
  ctx.clearRect(0,0,c.width,c.height);
  const w=c.width,h=c.height,pad=10;
  const min=Math.min(...series), max=Math.max(...series);
  ctx.beginPath();
  series.forEach((v,i)=>{
    const x=pad + (w-2*pad)*(i/(series.length-1));
    const y=h-pad - (h-2*pad)*((v-min)/(max-min||1));
    if(i===0) ctx.moveTo(x,y); else ctx.lineTo(x,y);
  });
  ctx.strokeStyle='#2b7'; ctx.lineWidth=2; ctx.stroke();
}
load();
setInterval(load, 60*1000);
</script>
